# =====================================================
# 식재료LAB — Render.com Blueprint (원클릭 배포)
# =====================================================

services:
  - type: web
    name: foodlab
    runtime: ruby
    region: singapore
    plan: free
    buildCommand: "bundle install && (bundle exec rails db:migrate 2>/dev/null || true) && (bundle exec bootsnap precompile app/ lib/ 2>/dev/null || true)"
    startCommand: "bundle exec puma -C config/puma.rb"
    rootDir: backend
    envVars:
      - key: RAILS_ENV
        value: production
      - key: RAILS_SERVE_STATIC_FILES
        value: "true"
      - key: RAILS_LOG_TO_STDOUT
        value: "true"
      - key: SECRET_KEY_BASE
        generateValue: true
      - key: USDA_API_KEY
        value: DEMO_KEY
      - key: ALLOWED_ORIGINS
        value: "*"
    healthCheckPath: /up
